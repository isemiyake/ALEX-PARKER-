RewriteEngine On
#---------------------------------
# ROUTES
#---------------------------------

# ROUTE PAR DEFAUT: liste des posts
#   PATTERN: /
#   CTRL: pagesController
#   ACTION: blogAction
#   TITLE: Alex Parker - Blog

# ROUTE DU DETAIL D'UN POST
#   PATTERN: /posts/id/slug-du-post.html
#   URL: /posts/123/mon-post.html
#   CTRL: postsController
#   ACTION: showAction
#   TITLE: Alex Parker - Title du post
RewriteRule ^posts/([0-9]+)/([a-z0-9-]+)\.html$ index.php?post_id=$1 [L]

# ROUTE D'AJOUT D'UN POST: affichage du formulaire
#   PATTERN: /posts/add/form.html
#   CTRL: postsController
#   ACTION: addAction
#   TITLE: Alex Parker - Add a post
RewriteRule ^posts/add/form\.html$ index.php?addForm [L]

# ROUTE D'AJOUT D'UN POST: INSERT
#   PATTERN: /posts/add/insert.html
#   CTRL: postsController
#   ACTION: addInsert
#   PAS DE TITLE CAR REDIRECTION VERS LA PAGE D'ACCUEIL
RewriteRule ^posts/add/insert\.html$ index.php?insert [L]

# ROUTE DE MODIFICATION D'UN POST: Affichage du formulaire
#   PATTERN: /posts/id/slug-du-post/edit/form.html
#   CTRL: postsController
#   ACTION: editFormAction
#   TITLE: Alex Parker - Edit a post
RewriteRule ^posts/([0-9]+)/([a-z0-9-]+)/edit/form\.html$ index.php?edit&id=$1 [L]

# ROUTE DE MODIFICATION D'UN POST: UPDATE
#   PATTERN: /posts/id/slug-du-post/edit/update.html
#   CTRL: postsController
#   ACTION: editUpdateAction
#   PAS DE TITLE CAR REDIRECTION VERS LA PAGE DE DETAILS DU POST
RewriteRule ^posts/([0-9]+)/([a-z0-9-]+)/edit/update\.html$ index.php?update&id=$1 [L]

# ROUTE DE SUPPRESSION D'UN POST
#   PATTERN: /posts/id/slug-du-post/delete.html
#   CTRL: postsController
#   ACTION: deleteAction
#   PAS DE TITLE CAR REDIRECTION VERS LA PAGE D'ACCUEIL
RewriteRule ^posts/([0-9]+)/([a-z0-9-]+)/delete\.html$ index.php?delete&id=$1 [L]

# Ignorer les fichiers statiques (CSS, JS, images, polices, etc.)
RewriteCond %{REQUEST_URI} !\.(?:css|js|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|eot)$ [NC]

# ROUTE PAR DEFAUT: toutes les autres URLs passent par index.php
RewriteRule ^(.*)$ index.php [L]
